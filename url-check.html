<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase URL í™•ì¸</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .check-box { border: 1px solid #ccc; padding: 20px; margin: 10px 0; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        #result { background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 10px; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>ğŸ” Supabase URL ë° ì—°ê²° í™•ì¸</h1>
    
    <div class="check-box">
        <h3>1. URL ì ‘ê·¼ í…ŒìŠ¤íŠ¸</h3>
        <p>í˜„ì¬ URL: <strong>https://ukusvgxtnlejcrgzqazy.supabase.co</strong></p>
        <button onclick="checkUrl()">URL ì ‘ê·¼ í™•ì¸</button>
        <button onclick="checkRestApi()">REST API í™•ì¸</button>
    </div>
    
    <div class="check-box">
        <h3>2. ìƒˆ í”„ë¡œì íŠ¸ URL ì…ë ¥</h3>
        <input type="text" id="newUrl" placeholder="ìƒˆ Supabase URL ì…ë ¥" style="width: 400px; padding: 8px;">
        <input type="text" id="newKey" placeholder="ìƒˆ API í‚¤ ì…ë ¥" style="width: 400px; padding: 8px; margin-top: 5px;">
        <br>
        <button onclick="testNewCredentials()">ìƒˆ ì„¤ì •ìœ¼ë¡œ í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div id="result"></div>

    <script>
        function log(message) {
            const resultElement = document.getElementById('result')
            const timestamp = new Date().toLocaleTimeString()
            resultElement.textContent += `[${timestamp}] ${message}\n`
            console.log(message)
        }
        
        async function checkUrl() {
            try {
                log("ğŸ”„ Supabase URL ì ‘ê·¼ í…ŒìŠ¤íŠ¸ ì‹œì‘...")
                const url = "https://sbp9b29c3392fc7ba020eb88c5fe0ff9845beb8aa36.supabase.co"
                
                const response = await fetch(url, { method: 'HEAD' })
                log("âœ… URL ì ‘ê·¼ ê°€ëŠ¥: " + response.status)
                
            } catch (error) {
                log("âŒ URL ì ‘ê·¼ ì‹¤íŒ¨: " + error.message)
                log("ğŸ’¡ ìƒˆë¡œìš´ Supabase í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.")
            }
        }
        
        async function checkRestApi() {
            try {
                log("ğŸ”„ REST API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸...")
                const url = "https://sbp9b29c3392fc7ba020eb88c5fe0ff9845beb8aa36.supabase.co/rest/v1/"
                const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVrdXN2Z3h0bmxlamNyZ3pxYXp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwNzM4ODAsImV4cCI6MjA2MzY0OTg4MH0.VbJ-i5EfRC4e-ybB7LbcTXqz3dWdU1SIbzKwWetxr2g"
                
                const response = await fetch(url, {
                    headers: {
                        'apikey': key,
                        'Authorization': 'Bearer ' + key,
                        'Content-Type': 'application/json'
                    }
                })
                
                if (response.ok) {
                    log("âœ… REST API ì—”ë“œí¬ì¸íŠ¸ ì ‘ê·¼ ê°€ëŠ¥")
                } else {
                    log("âŒ REST API ì‘ë‹µ ì˜¤ë¥˜: " + response.status + " " + response.statusText)
                }
                
            } catch (error) {
                log("âŒ REST API ì ‘ê·¼ ì‹¤íŒ¨: " + error.message)
            }
        }
        
        async function testNewCredentials() {
            const newUrl = document.getElementById('newUrl').value.trim()
            const newKey = document.getElementById('newKey').value.trim()
            
            if (!newUrl || !newKey) {
                log("âŒ URLê³¼ API í‚¤ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")
                return
            }
            
            try {
                log("ğŸ”„ ìƒˆ ì„¤ì •ìœ¼ë¡œ ì—°ê²° í…ŒìŠ¤íŠ¸...")
                log("URL: " + newUrl)
                log("Key: " + newKey.substring(0, 20) + "...")
                
                // Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„± í…ŒìŠ¤íŠ¸
                const testUrl = newUrl + "/rest/v1/contacts?select=count"
                
                const response = await fetch(testUrl, {
                    headers: {
                        'apikey': newKey,
                        'Authorization': 'Bearer ' + newKey,
                        'Content-Type': 'application/json'
                    }
                })
                
                if (response.ok) {
                    log("âœ… ìƒˆ ì„¤ì •ìœ¼ë¡œ ì—°ê²° ì„±ê³µ!")
                    log("ğŸ’¾ ì´ ì„¤ì •ì„ .env íŒŒì¼ì— ì €ì¥í•˜ì„¸ìš”:")
                    log("VITE_SUPABASE_URL=" + newUrl)
                    log("VITE_SUPABASE_ANON_KEY=" + newKey)
                } else {
                    const errorText = await response.text()
                    log("âŒ ìƒˆ ì„¤ì • ì—°ê²° ì‹¤íŒ¨: " + response.status)
                    log("ì˜¤ë¥˜ ë‚´ìš©: " + errorText)
                }
                
            } catch (error) {
                log("âŒ ìƒˆ ì„¤ì • í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: " + error.message)
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.onload = function() {
            log("ğŸ“Š Supabase ì—°ê²° ì§„ë‹¨ ì‹œì‘...")
            checkUrl()
        }
    </script>
</body>
</html> 